---
description: "功能实施任务列表模板"
---

# 任务: [功能名称]

**输入**: 来自 `/specs/[###-功能名称]/` 的设计文档
**先决条件**: plan.md（必需）、spec.md（用户故事必需）、research.md、data-model.md、contracts/

**测试**: 下面的示例包含测试任务。测试是可选的 - 仅在功能规格说明中明确要求时才包含。

**组织**: 任务按用户故事分组，以便每个故事可以独立实施和测试。

## 格式: `[ID] [P?] [故事] 描述`
- **[P]**: 可以并行运行（不同文件，无依赖关系）
- **[故事]**: 此任务属于哪个用户故事（例如：US1、US2、US3）
- 在描述中包含确切的文件路径

## 路径约定
- **单项目**: 仓库根目录的 `src/`、`tests/`
- **Web应用**: `backend/src/`、`frontend/src/`
- **移动端**: `api/src/`、`ios/src/` 或 `android/src/`
- 下面显示的路径假设单项目 - 根据plan.md结构调整

<!-- 
  ============================================================================
  重要提示: 下面的任务仅用于说明目的的示例任务。
  
  /speckit.tasks命令必须根据以下内容替换为实际任务：
  - 来自spec.md的用户故事（及其优先级P1、P2、P3...）
  - 来自plan.md的功能需求
  - 来自data-model.md的实体
  - 来自contracts/的端点
  
  任务必须按用户故事组织，以便每个故事可以：
  - 独立实施
  - 独立测试
  - 作为MVP增量交付
  
  不要在生成的tasks.md文件中保留这些示例任务。
  ============================================================================
-->

## 阶段1：设置（共享基础设施）

**目的**: 项目初始化和基本结构

- [ ] T001 根据实施计划创建项目结构
- [ ] T002 使用[框架]依赖初始化[语言]项目
- [ ] T003 [P] 配置代码检查和格式化工具

---

## 阶段2：基础（阻塞先决条件）

**目的**: 在任何用户故事实施之前必须完成的核心基础设施

**⚠️ 关键**: 在此阶段完成之前，任何用户故事工作都无法开始

基础任务示例（根据您的项目调整）：

- [ ] T004 设置数据库模式和迁移框架
- [ ] T005 [P] 实施认证/授权框架
- [ ] T006 [P] 设置API路由和中间件结构
- [ ] T007 创建所有故事依赖的基础模型/实体
- [ ] T008 配置错误处理和日志基础设施
- [ ] T009 设置环境配置管理

**检查点**: 基础就绪 - 用户故事实施现在可以并行开始

---

## 阶段3：用户故事1 - [标题]（优先级：P1）🎯 MVP

**目标**: [此故事交付内容的简要描述]

**独立测试**: [如何验证此故事独立工作]

### 用户故事1的测试（Hook操作必需）⚠️

**注意：首先编写这些测试，确保它们在实施前失败**

- [ ] T010 [P] [US1] Hook函数单元测试在tests/unit/test_[hook_name].ts
- [ ] T011 [P] [US1] 内存安全验证测试在tests/unit/test_[memory_test].ts
- [ ] T012 [P] [US1] 性能基准测试在tests/performance/test_[benchmark].ts
- [ ] T013 [P] [US1] 回滚验证测试在tests/integration/test_[rollback].ts

### 用户故事1的实施

- [ ] T014 [P] [US1] 在src/base/skill/[skill_name].ts中创建[技能]模型
- [ ] T015 [P] [US1] 在src/base/skill/[hook_wrapper].ts中创建[Hook]包装器
- [ ] T016 [US1] 在src/base/[hook_location].ts中实施[hook函数]（依赖于T014、T015）
- [ ] T017 [US1] 在src/skills/[skill_implementation].ts中实施[技能修改]
- [ ] T018 [US1] 添加内存安全验证和错误处理
- [ ] T019 [US1] 为Hook操作添加全面的日志记录

**检查点**: 此时，用户故事1应该完全功能化并且可以独立测试

---

## 阶段4：用户故事2 - [标题]（优先级：P2）

**目标**: [此故事交付内容的简要描述]

**独立测试**: [如何验证此故事独立工作]

### 用户故事2的测试（可选 - 仅在明确要求测试时）⚠️

- [ ] T018 [P] [US2] [端点]的合同测试在tests/contract/test_[name].py
- [ ] T019 [P] [US2] [用户旅程]的集成测试在tests/integration/test_[name].py

### 用户故事2的实施

- [ ] T020 [P] [US2] 在src/models/[entity].py中创建[实体]模型
- [ ] T021 [US2] 在src/services/[service].py中实施[服务]
- [ ] T022 [US2] 在src/[location]/[file].py中实施[端点/功能]
- [ ] T023 [US2] 与用户故事1组件集成（如果需要）

**检查点**: 此时，用户故事1和2都应该独立工作

---

## 阶段5：用户故事3 - [标题]（优先级：P3）

**目标**: [此故事交付内容的简要描述]

**独立测试**: [如何验证此故事独立工作]

### 用户故事3的测试（可选 - 仅在明确要求测试时）⚠️

- [ ] T024 [P] [US3] [端点]的合同测试在tests/contract/test_[name].py
- [ ] T025 [P] [US3] [用户旅程]的集成测试在tests/integration/test_[name].py

### 用户故事3的实施

- [ ] T026 [P] [US3] 在src/models/[entity].py中创建[实体]模型
- [ ] T027 [US3] 在src/services/[service].py中实施[服务]
- [ ] T028 [US3] 在src/[location]/[file].py中实施[端点/功能]

**检查点**: 所有用户故事现在都应该独立功能化

---

[根据需要添加更多用户故事阶段，遵循相同模式]

---

## 阶段N：完善与横切关注点

**目的**: 影响多个用户故事的改进

- [ ] TXXX [P] 在docs/中的文档更新
- [ ] TXXX 代码清理和重构
- [ ] TXXX 所有故事的性能优化
- [ ] TXXX [P] 在tests/unit/中的额外单元测试（如果请求）
- [ ] TXXX 安全加固
- [ ] TXXX 运行quickstart.md验证

---

## 依赖关系与执行顺序

### 阶段依赖关系

- **设置（阶段1）**: 无依赖关系 - 可以立即开始
- **基础（阶段2）**: 依赖于设置完成 - 阻塞所有用户故事
- **用户故事（阶段3+）**: 都依赖于基础阶段完成
  - 用户故事然后可以并行进行（如果有人员）
  - 或按优先级顺序进行（P1 → P2 → P3）
- **完善（最终阶段）**: 依赖于所有所需用户故事的完成

### 用户故事依赖关系

- **用户故事1（P1）**: 可以在基础阶段（阶段2）后开始 - 不依赖于其他故事
- **用户故事2（P2）**: 可以在基础阶段（阶段2）后开始 - 可能与US1集成但应该独立可测试
- **用户故事3（P3）**: 可以在基础阶段（阶段2）后开始 - 可能与US1/US2集成但应该独立可测试

### 在每个用户故事内

- 测试（如果包含）必须在实施前编写并失败
- 模型在服务之前
- 服务在端点之前
- 核心实施在集成之前
- 故事完成后再进行下一个优先级

### 并行机会

- 所有标记为[P]的设置任务可以并行运行
- 所有标记为[P]的基础任务可以并行运行（在阶段2内）
- 一旦基础阶段完成，所有用户故事可以并行开始（如果团队容量允许）
- 用户故事的所有测试标记为[P]可以并行运行
- 故事内的模型标记为[P]可以并行运行
- 不同的用户故事可以由不同的团队成员并行工作

---

## 并行示例：用户故事1

```bash
# 一起启动用户故事1的所有测试（如果请求测试）：
任务："在tests/contract/test_[name].py中对[端点]进行合同测试"
任务："在tests/integration/test_[name].py中对[用户旅程]进行集成测试"

# 一起启动用户故事1的所有模型：
任务："在src/models/[entity1].py中创建[Entity1]模型"
任务："在src/models/[entity2].py中创建[Entity2]模型"
```

---

## 实施策略

### MVP优先（仅用户故事1）

1. 完成阶段1：设置
2. 完成阶段2：基础（关键 - 阻塞所有故事）
3. 完成阶段3：用户故事1
4. **停止并验证**：独立测试用户故事1
5. 如果准备就绪则部署/演示

### 增量交付

1. 完成设置 + 基础 → 基础就绪
2. 添加用户故事1 → 独立测试 → 部署/演示（MVP！）
3. 添加用户故事2 → 独立测试 → 部署/演示
4. 添加用户故事3 → 独立测试 → 部署/演示
5. 每个故事都增加价值而不破坏之前的故事

### 并行团队策略

使用多个开发者：

1. 团队一起完成设置 + 基础
2. 一旦基础完成：
   - 开发者A：用户故事1
   - 开发者B：用户故事2
   - 开发者C：用户故事3
3. 故事完成并独立集成

---

## 注意事项

- [P]任务 = 不同文件，无依赖关系
- [故事]标签将任务映射到特定用户故事以便追踪
- 每个用户故事应该独立完成和可测试
- 在实施前验证测试失败
- 在每个任务或逻辑组后提交
- 在任何检查点停止以独立验证故事
- 避免：模糊任务、相同文件冲突、破坏独立性的跨故事依赖


